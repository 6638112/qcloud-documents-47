本文将介绍TDSQL MySQL版中TPC-C体验版（物理复制版本）的特性、性能及使用方式。该版本是TDSQL通过TPC-C基准测试的版本，在高IO并发性能上有较大的提升。

>? 说明：

> 由TPC发起的TPC-C是全球数据库认可的一套性能评价标准，它模拟超大型高并发的极值场景，对数据库系统的软硬件协同能力要求极高。

> 2023年3月，腾讯云数据库TDSQL实现每分钟交易量8.14亿次,同时在超高压下稳定运行8小时，波动率为0.2%，成功打破纪录。

> TPC官网链接：https://www.tpc.org/tpcc/results/tpcc_results5.asp?print=false&orderby=tpm&sortby=desc


## 物理复制版本特性
- 支持物理复制。物理复制是将主库WAL日志流直接发给备库，备库根据WAL日志进行重做的一种复制方式，这种复制和MySQL原生复制有明显区别，复制期间不会产生binlog文件。

| 地域 | 价格（元/GB/小时） |
| ------ | ------ |
|物理复制 |- 以WAL日志流传输，不涉及binlog和gtid，减少了数据写盘量，实例整体的吞吐量和响应时间都得到了提升。
||- 拥有更好的并发性，redolog的同步可以支持同时在主备库上执行事务，而无需等待主库上执行完成再执行备库。|
|原生复制 |- 生成binlog进行同步复制，binlog是较为统一的日志格式，有成熟的工具来进行解析，通过binlog可以提供回档、迁移、同步等能力，并使主备之间的复制方式更加多样化。 |


- 不支持创建灾备关系
- 不支持binlog查看和备份克隆
- 不支持全局一致性读
- 不支持一级list/range和二级分区表
- 不支持SET级全局索引
- 不支持TDE透明加密
- 不支持作为源数据库或目标数据库创建DTS数据迁移和数据同步任务
- 不支持DBS数据库备份

## 物理复制版本性能
经过测试，在高IO场景下，物理复制版本的性能有显著提升：

系统架构：x86

|测试工具	|sysbench 1.1.0||||
| ------ | ------ | ------ | ------ | ------ |
|实例类型|分布式实例 4SET 100G内存 1主1备 强同步 64张表 400w行/张 72G数据（每个节点18G）||||
|测试版本	|TPCC体验版	||8.0.24版本||
|测试并发	|1000	||1000||
|导数耗时	|2min |	|2min||
|结果指标	|TPS	|QPS|	TPS	|QPS|
|点查	|466200|466200	|467623	|467623|
|混合读写	|25873	|413982	|24079	|385268|
|索引更新	|420240	|420240	|223315	|223315|
|非索引更新	|450442	|450442	|246283	|246283|


|测试工具|	TPCC||
| ------ | ------ | ------ |
|实例类型|	分布式实例 4SET 100G内存 1主1备 强同步||
|测试版本|	TPCC体验版|	8.0.24版本|
|测试并发|	1500|	1500|
|导数耗时|	6min|	10min|
|仓数	|400仓（24G数据）|	400仓（24G数据）|
|tpmC (NewOrders)|	718987.05|	657133.54|
|tpmTOTAL|	1597821.41|	1460117.75|
|Transaction Count|	31962792|29208876|


## 使用物理复制版本
1.登录 [TDSQL MySQL版 控制台](https://console.cloud.tencent.com/tdsqld/instance-tdmysql)，点击**新建**创建新实例

2.在**数据库版本**选择TPCC体验

3.购买实例并体验使用
>? 说明：
> 当前**TPCC体验版**由白名单控制开放，如需体验请[提交工单](https://console.cloud.tencent.com/workorder/category)开通。